<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1, maximum-scale=1, user-scalable=no"/>
		<meta name="description" content="Rubik’s Cube">
		<meta name="keywords" content="Erno Rubik’s Cube">
		<link rel="icon" type="image/png" href="lib/cuber/media/cube.png">

		<!------ CSS ------>
		<link rel="stylesheet" type="text/css" href="lib/cuber/css/cube.css">
		<link rel="stylesheet" type="text/css" href="cube/css/style.css">



		<title>Cuber</title>

		<script charset="utf-8" src="lib/cuber/js/vendor/tween.min.js"></script>


		<!-- cube source code -->


			<!--  Three.js  -->
			<script charset="utf-8" src="lib/cuber/js/vendor/threejs/src/Three.js"></script>
			<script charset="utf-8" src="lib/cuber/js/vendor/threejs/src/core/EventDispatcher.js"></script>
			<script charset="utf-8" src="lib/cuber/js/vendor/threejs/src/math/Math.js"></script>
			<script charset="utf-8" src="lib/cuber/js/vendor/threejs/src/math/Quaternion.js"></script>
			<script charset="utf-8" src="lib/cuber/js/vendor/threejs/src/math/Vector2.js"></script>
			<script charset="utf-8" src="lib/cuber/js/vendor/threejs/src/math/Vector3.js"></script>
			<script charset="utf-8" src="lib/cuber/js/vendor/threejs/src/math/Box3.js"></script>
			<script charset="utf-8" src="lib/cuber/js/vendor/threejs/src/math/Sphere.js"></script>
			<script charset="utf-8" src="lib/cuber/js/vendor/threejs/src/math/Euler.js"></script>
			<script charset="utf-8" src="lib/cuber/js/vendor/threejs/src/math/Matrix3.js"></script>
			<script charset="utf-8" src="lib/cuber/js/vendor/threejs/src/math/Matrix4.js"></script>
			<script charset="utf-8" src="lib/cuber/js/vendor/threejs/src/core/Object3D.js"></script>
			<script charset="utf-8" src="lib/cuber/js/vendor/threejs/src/cameras/Camera.js"></script>
			<script charset="utf-8" src="lib/cuber/js/vendor/threejs/src/cameras/PerspectiveCamera.js"></script>
			<script charset="utf-8" src="lib/cuber/js/vendor/threejs/src/math/Ray.js"></script>
			<script charset="utf-8" src="lib/cuber/js/vendor/threejs/src/math/Plane.js"></script>


			<!--  Here are the Cube guts. Enjoy.  -->
			<script charset="utf-8" src="lib/cuber/js/ERNO.js"></script>
			<script charset="utf-8" src="lib/cuber/js/vendor/CSS3DRenderer.js"></script>
			<script charset="utf-8" src="lib/cuber/js/utils/utils.js"></script>
			<script charset="utf-8" src="lib/cuber/js/utils/Number.js"></script>
			<script charset="utf-8" src="lib/cuber/js/utils/String.js"></script>
			<script charset="utf-8" src="lib/cuber/js/utils/Array.js"></script>
			<script charset="utf-8" src="lib/cuber/js/colors.js"></script>
			<script charset="utf-8" src="lib/cuber/js/directions.js"></script>
			<script charset="utf-8" src="lib/cuber/js/queues.js"></script>
			<script charset="utf-8" src="lib/cuber/js/twists.js"></script>
			<script charset="utf-8" src="lib/cuber/js/cubelets.js"></script>
			<script charset="utf-8" src="lib/cuber/js/groups.js"></script>
			<script charset="utf-8" src="lib/cuber/js/slices.js"></script>
			<script charset="utf-8" src="lib/cuber/js/folds.js"></script>
			<script charset="utf-8" src="lib/cuber/js/projector.js"></script>
			<script charset="utf-8" src="lib/cuber/js/interaction.js"></script>
			<script charset="utf-8" src="lib/cuber/js/controls.js"></script>
			<script charset="utf-8" src="lib/cuber/js/cubes.js"></script>
			<script charset="utf-8" src="lib/cuber/js/solvers.js"></script>
			<script charset="utf-8" src="lib/cuber/js/renderer.js"></script>



		<!-- implementation -->	
		<script charset="utf-8" src="lib/cuber/js/jquery-3.4.0.min.js"></script>
		<script charset="utf-8" src="lib/cuber/js/extras/renderers/iecss3d.js"></script>
		<script charset="utf-8" src="lib/cuber/js/extras/renderers/ierenderer.js"></script>
		<script charset="utf-8" src="lib/cuber/js/extras/controls/locked.js"></script>
		<script charset="utf-8" src="lib/cuber/js/extras/deviceMotion.js"></script>
		
		<!-- Two-phase Algorithm  -->
		<script charset="utf-8" src="lib/cubejs/cube.js"></script>		
		<script charset="utf-8" src="lib/cubejs/solve.js"></script>
		
		<!-- plugin -->	
		<script type="text/javascript" src="cube/js/typewriting.js"></script>

		<script charset="utf-8" src="cube/js/initial.js"></script>		
		<script charset="utf-8" src="cube/js/LBL.js"></script>
	</head>
	
	<body class="graydient" >
		<div class="solve-step">
			<div class="terminal"></div>
		</div>
		<div class="solve">
			<button class="btn solve-btn" onclick="cubeGL.solve()">Solve | LBL</button>
			<button class="btn solve-btn" onclick="TwoPhase()">Solve | Two-phase</button>
			<button class="btn solve-btn" onclick="Shuffle()">Shuffle</button>
			<button class="btn solve-btn" onclick="Reset()">Reset</button>
		</div>
		<div id="container" ></div>
		<div class="twist">
			<h1>Rotate</h1>
			<button class="btn" onclick="cubeGL.twist('U')">U</button>
			<button class="btn" onclick="cubeGL.twist('u')">u</button><br>
			<button class="btn" onclick="cubeGL.twist('D')">D</button>
			<button class="btn" onclick="cubeGL.twist('d')">d</button><br>
			<button class="btn" onclick="cubeGL.twist('F')">F</button>
			<button class="btn" onclick="cubeGL.twist('f')">f</button><br>
			<button class="btn" onclick="cubeGL.twist('B')">B</button>
			<button class="btn" onclick="cubeGL.twist('b')">b</button><br>
			<button class="btn" onclick="cubeGL.twist('L')">L</button>
			<button class="btn" onclick="cubeGL.twist('l')">l</button><br>
			<button class="btn" onclick="cubeGL.twist('R')">R</button>
			<button class="btn" onclick="cubeGL.twist('r')">r</button>
			<button class="btn" onclick="cubeGL.twist('S')">S</button>
			<button class="btn" onclick="cubeGL.twist('s')">s</button>
			<button class="btn" onclick="cubeGL.twist('E')">E</button>
			<button class="btn" onclick="cubeGL.twist('e')">e</button>
			<button class="btn" onclick="cubeGL.twist('M')">M</button>
			<button class="btn" onclick="cubeGL.twist('m')">m</button>
		</div>
	</body>
</html>

<script>

function TwoPhase()
{
	updateCubeTwoPhase()
	if(cubeGL.isSolved() == true)
	{
		$('.terminal').typewriting("The cube is already solved.", {
			"cursor_color": "#ffffff",
		})
	}
	else
	{
		var solve_step = cubeTwoPhase.solve();
		//console.log(solve_step)
		cubeGL.twist(solve_step)
		$('.terminal').typewriting("Two-phase: " + solve_step, {
			"cursor_color": "#ffffff",
		})
	}
}

function updateCubeTwoPhase()
{
	var cubeStringColor = ""
	var cubeStringFaces = ""
	
	var read = [8, 7, 6, 5, 4, 3, 2, 1, 0]
	for (var i = 0; i <= 8; i++) {
		cubeStringColor += cubeGL.up.cubelets[read[i]].up.color.initial
	}
	for (var i = 0; i <= 8; i++) {
		cubeStringColor += cubeGL.right.cubelets[read[i]].right.color.initial
	}
	for (var i = 0; i <= 8; i++) {
		cubeStringColor += cubeGL.front.cubelets[read[i]].front.color.initial
	}

	read = [2, 5, 8, 1, 4, 7, 0, 3, 6]
	for (var i = 0; i <= 8; i++) {
		cubeStringColor += cubeGL.down.cubelets[read[i]].down.color.initial
	}

	read = [6, 3, 0, 7, 4, 1, 8, 5, 2]
	for (var i = 0; i <= 8; i++) {
		cubeStringColor += cubeGL.left.cubelets[read[i]].left.color.initial
	}
	for (var i = 0; i <= 8; i++) {
		cubeStringColor += cubeGL.back.cubelets[read[i]].back.color.initial
	}

	var cubeOriginColors = [
		{pos: "U", color: cubeGL.up.cubelets[4].up.color.initial},
		{pos: "R", color: cubeGL.right.cubelets[4].right.color.initial},
		{pos: "F", color: cubeGL.front.cubelets[4].front.color.initial},
		{pos: "D", color: cubeGL.down.cubelets[4].down.color.initial},
		{pos: "L", color: cubeGL.left.cubelets[4].left.color.initial},
		{pos: "B", color: cubeGL.back.cubelets[4].back.color.initial}
	]

	for (var i = 0; i < cubeStringColor.length; i++) {
		for (var j = 0; j < cubeOriginColors.length; j++) {
			if(cubeStringColor[i] == cubeOriginColors[j].color) {
				cubeStringFaces += cubeOriginColors[j].pos
				break
			}
		}
	}
	cubeTwoPhase = Cube.fromString(cubeStringFaces)
}

function Shuffle()
{
	var shuffle_step = cubeGL.shuffle(20);
	$('.terminal').typewriting("Shuffle: " + shuffle_step, {
		"cursor_color": "#ffffff",
	})
}

function Reset()
{
	updateCubeTwoPhase()
	var solve_step = cubeTwoPhase.solve();
	cubeGL.twistDuration = 0;
	cubeGL.twist(solve_step);
	setTimeout("cubeGL.twistDuration = 300", 1000)
}
</script>